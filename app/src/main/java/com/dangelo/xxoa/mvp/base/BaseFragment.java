package com.dangelo.xxoa.mvp.base;import android.content.Context;import android.os.Bundle;import android.support.v4.app.Fragment;import android.util.Log;import android.view.LayoutInflater;import android.view.View;import android.view.ViewGroup;import com.umeng.analytics.MobclickAgent;/** * @mga */public abstract class BaseFragment<V extends BaseView, T extends BasePresenter<V>> extends Fragment {    private final String TAG = this.getClass().getSimpleName();    protected T mPresenter;    protected Bundle mBundle;    private String mPageName;    @Override    public void onAttach(Context context) {        super.onAttach(context);        Log.d(TAG,"onAttach");    }    @Override    public void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        Log.d(TAG, "onCreate");        mPageName=getClass().getSimpleName();        Log.d(TAG, "mPageName :"+mPageName);        //获取bundle,并保存起来//        if (savedInstanceState != null) {//            mBundle = savedInstanceState.getBundle("bundle");//        } else {//            mBundle = getArguments() == null ? new Bundle() : getArguments();//        }    }    @Override    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {        Log.d(TAG, "onCreateView");        View view = inflater.inflate(bindLayout(), container, false);        Log.d(TAG,"view="+view.getId());        Log.d(TAG,"view="+view.toString());//        JLog.d(TAG, "bundle_number" + mBundle.getString("number"));        //注入P层        this.mPresenter = createPresenter();        if (mPresenter != null) {            mPresenter.attach((V) this);        }        initView(view, savedInstanceState);        if(getArguments()!=null){            mBundle=getArguments();        }        return view;    }    @Override    public void onResume() {        super.onResume();        log("------>onResume");        MobclickAgent.onPageStart(mPageName);    }    @Override    public void onPause() {        super.onPause();        log("------>onPause");        MobclickAgent.onPageEnd(mPageName);    }    @Override    public void onDestroy() {        super.onDestroy();        log("------>onDestroy");        if (mPresenter != null) {            mPresenter.detach();        }    }    @Override    public void onDetach() {        super.onDetach();    }    protected abstract int bindLayout();    protected abstract T createPresenter();    protected abstract void initView(View view, Bundle savedInstanceState);    protected void log(String msg) {        Log.i(TAG, msg);    }}